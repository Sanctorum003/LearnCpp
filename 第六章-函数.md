# 函数基础

## 函数返回类型

* 返回类型不能是数组类型或者函数类型，但是可以是指向数组或者函数的指针.

# 局部对象

* 名字的作用域

  - 名字的作用域是程序文本的一部分，名字在其中可见

* 对象的生命周期  
  
  - 对象的生命周期是程序执行过程中该对象存在的一段时间。

* 自动对象

  - 只存在于块执行期间的对象称为自动对象，当块的执行结束后，块中创建的自动独享的值就会变成未定义的了

  - 自动对象未指定初值，则会默认初始化，初始值为未定义的值。

* 局部静态对象

  - 在程序的执行路径第一次经过对象定义时初始化，并且直到程序终止才销毁。

## 函数声明

* 函数只能定义一次，但是能声明多次

* 函数声明 == 函数原型

# 参数传递

* 形参初始化的机理与变量初始化一样

* 引用传递：形参将绑定到对应的实参上。

* 值传递：将实参的值拷贝后赋值给形参

## 传值参数
*  对形参的操作不会影响实参

* 指针形参
  - 拷贝的是指针，但是可以通过指针来更改所指对象的内容

## 引用参数
* 使用引用避免拷贝
  - 尽量使用引用参数,对于不需要改变实参的时候，可以使用常量引用

## const形参和实参
* const int i 和int i不能成为重载函数

## 数组形参
* 不允许拷贝数组
* 数组在参数传递时会转换成指针

### 管理指针形参的方法，
* 使用标记指定数组长度
  - 给指针数组提供一个结束标记，比如char*的'\0'结束标记

* 使用标准库规范
  - 提供一个指针数组的首尾指针，迭代知道首尾指针重合

* 显式传递一个表示数组大小的形参

***

![](img/复杂数组声明.png)

## main:处理命令行选项
```cpp
int main(int argc,char **argv)
//argc:命令行参数的个数，
//argv:命令行参数字符串,argv[0]为程序名
```

## 含有可变（数量）形参的函数
* initializer_list 标准库类型
    - 成员永远是常量 
    - 传递参数的时候用花括号括起来
* 可变参模板
    - 见16.4
* 省略符形参
    - 应该只用在c和c++通用的类型，不适用于大多数类类型
    - [使用方法](https://blog.csdn.net/Clark_Sev/article/details/89500808?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param) 

# 返回类型和return语句
## 无返回值的函数
## 有返回值的函数
* 返回值是在该函数中创建的临时变量。
* 不要返回局部对象的引用或指针。

### 引用返回左值
* 函数的返回类型决定函数调用是否是左值
  - 调用一个调用返回引用的函数得到左值
  - 其他返回类型得到左值

* 通过这种方式就可以多次调用函数和使用运算符
```cpp
auto sz = shorterString(s1,s2).size()

//还要注意返回类型是常量的引用，也不能给调用的结果赋值
shorterString("hi","bye") = "X" //false
```
```cpp
char get_val(string &str,string::size_type ix)
{
    return str[ix];
}

int main()
{
    string s("a value");
    cout<<s<<endl;
    get_val(s,0) = 'A';
    cout<<s<<endl;
    return 0;
}
```

### 列表初始化返回值
* 函数可以返回花括号包围的值的列表。
  - 内置类型，列表中做多包含一个值
  - 类类型，有类本身定义初始值如何使用

### 主函数返回值
* cstdlib中有与机器无关的预定义变量表示各类错误信息，如
  - EXIT_FAILURE
  - EXIT_SUCCESS

### 声明一个返回数组指针的函数
* 一般方式
> Type (*function(parameter_list))[dimension]

![](img/数组指针返回一般形式解释.png)

* 使用类型别名
```cpp
typedef int arrT[10];
using arrT = int[10];
arrT* func(int i);
```
> arrT是含有10个整数的数组的别名

> 函数返回的是包含10个整数的数组的指针（二维数组）

* 使用尾置返回类型
> auto func(int i ) -> int(*)[10];

* 使用decltype
> decltype不负责把数组类型转换成指针，需要自己加上*

